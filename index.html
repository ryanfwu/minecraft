<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>HTML5 Minecraft</title>
        <link rel="icon" src="img/favicon.png" type="image/png">
        <style>
            html,body,canvas {
                margin: 0;
                padding: 0;
                width: 100%;
                height: 100%;
            }
        #fps {
            position: absolute;
            background-color: black;
            border: 2px solid red;
            text-align: center;
            font-size: 16px;
            color: white;
            top: 15px;
            right: 10px;
            width: 60px;
            height: 20px;
        }
        </style>
        <script src="https://cdn.babylonjs.com/babylon.max.js"></script>
        <script src="https://preview.babylonjs.com/babylon.max.js"></script>
    </head>
    <body style="cursor:none;">
        <div id="fps">0 fps</div>
        <canvas id="canvas"></canvas>
        
        <script>
            window.addEventListener("DOMContentLoaded",function() {
                var canvas = document.getElementById("canvas");
                var fps = document.getElementById("fps");
                var engine = new BABYLON.Engine(canvas);
                var x=0;
                var y=0;
                var z=-10;
                
                var isWPressed = false;
                var isAPressed = false;
                var isSPressed = false;
                var isDPressed = false;
                var isSpacePressed = false;
                var isShiftPressed = false;

                document.addEventListener('keydown', (e) => {
                    if (e.keyCode == 87) { isWPressed = true; }
                    if (e.keyCode == 65) { isAPressed = true; }
                    if (e.keyCode == 83) { isSPressed = true; }
                    if (e.keyCode == 68) { isDPressed = true; }
                    if (e.keyCode == 32) { isSpacePressed = true; }
                    if (e.keyCode == 16) { isShiftPressed = true; }
                });

                document.addEventListener('keyup', (e) => {
                    if (e.keyCode == 87) { isWPressed = false; }
                    if (e.keyCode == 65) { isAPressed = false; }
                    if (e.keyCode == 83) { isSPressed = false; }
                    if (e.keyCode == 68) { isDPressed = false; }
                    if (e.keyCode == 32) { isSpacePressed = false; }
                    if (e.keyCode == 16) { isShiftPressed = false; }
                });
                
                var createFps = function() {
                    fps.innerHTML = engine.getFps().toFixed() + " fps";
                }
                
                var createScene = function() {
                    var scene = new BABYLON.Scene(engine);
                    scene.clearColor = new BABYLON.Color3(0.8,0.8,0.8);
                    var camera = new BABYLON.FreeCamera("camera",new BABYLON.Vector3(x,y,z),scene);
                    var light = new BABYLON.PointLight("light",new BABYLON.Vector3(10,10,0),scene);

                    var box = BABYLON.Mesh.CreateBox("box",2,scene);

                    var boxMaterial = new BABYLON.StandardMaterial("material",scene);
                    boxMaterial.emissiveColor = new BABYLON.Color3(0,0.58,0.86);
                    box.material = boxMaterial;
                    
                    if (isWPressed == true) {
                        z += 0.1;
                    }
                    if (isAPressed == true) {
                        x -= 0.1;
                    }
                    if (isSPressed == true) {
                        z -= 0.1;
                    }
                    if (isDPressed == true) {
                        x += 0.1;
                    }
                    if (isSpacePressed = true) {
                        y += 0.1;
                    }
                    if (isShiftPressed = true) {
                        y -= 0.1;
                    }
                    
                    return scene;
                }

                engine.runRenderLoop(function() {
                    createScene().render();
                });
                
                setInterval(createFps,250);

                window.addEventListener('resize',function(){
                    engine.resize();
                });
            });
        </script>
    </body>
</html>
